<!--index.wxml-->
<import src='/template/searchBar/searchBar.wxml' />
<import src='/template/adBar/adBar.wxml' />

<view class="container container--color-white">
  <view class='headWrapper' style='background-image: url({{bg1}}); background-size: cover;background-repeat: no-repeat; background-position: bottom'>
    <!--搜索框-->
    <template is='searchBar' data='{{placeholder: "搜索文章", searchCondition: searchCondition}}'></template>
    <!--Banner-->
    <view class='navBar'>
      <view class='navBar__btn' bindtap='showAll'>
        <image class='navBar__icon' src='img/all.png'></image>
        <text>全部</text>
      </view>
      <view class='navBar__btn' bindtap='showCourses'>
        <image class='navBar__icon' src='img/course.png'></image>
        <text>课程</text>
      </view>
      <view class='navBar__btn' bindtap='showDocuments'>
        <image class='navBar__icon' src='img/document.png'></image>
        <text>文档</text>
      </view>
      <view class='navBar__btn' bindtap='showProjects'>
        <image class='navBar__icon' src='img/project.png'></image>
        <text>项目</text>
      </view>
    </view>
    <!--广告位-->
    <template class='ad' is='adBar' data='{{ad}}'></template>
  </view>
  <view class="b1" hidden="{{flag}}" bindtap="closeMask">
    <view class="b2">
      <image src="{{jumpAd}}" bindtap="touchMask"></image>
    </view>
    <view class="t_w">
      <cover-view class="t_image" bindtap="closeMask">
        <cover-image src="img/close.png"></cover-image>
      </cover-view>
    </view>
  </view>
  <!--文章列表-->
  <view class='articleListWrapper'>
    <text style='font-size:0.6rem' wx:if='{{searchCondition || searchCondition===""}}'>以下是“{{searchCondition}}”的搜索结果：</text>
    <view wx:if='{{articles.length > 0}}'>
      <view wx:for='{{articles}}' wx:key='id'>
        <view class='article' bindtap='onTouchThisArticle' data-kind='{{item.kind}}' data-id='{{item.id}}'>
          <view class='article__title'>
            <text>{{item.title}}</text>
          </view>
          <view class='article__like'>
            <view class='article__likeClick' catchtap='likePlus' data-kind='{{item.kind}}' data-id='{{item.id}}'>
              <text class='article__likeNum'>{{item.likeNum}}</text>
              <image class='article__likeImage' wx:if='{{item.hasLiked}}' src='img/like.png'></image>
              <image class='article__likeImage' wx:else src='img/unlike.png'></image>
            </view>
          </view>
          <view class='article__content'>
            <image class='article__banner' mode='widthFix' wx:if='{{item.images.length > 0}}' src='{{item.images[0]}}'></image>
            <view class='writer'>
              <image class='writer__face' src='{{item.writerFace ? item.writerFace : "/default/default-face.png"}}'></image>
              <text class='writer__name'>{{item.writerName}}</text>
              <view class='dot'></view>
              <text class='article__date'>{{item.date}}</text>
            </view>
          </view>
          <view class='article__bottom'>
            <text class='article__kindName'>{{item.kindName}}</text>
          </view>
        </view>
      </view>
    </view>
    <view wx:else>
      <text>暂无相关内容</text>
    </view>
  </view>
</view>