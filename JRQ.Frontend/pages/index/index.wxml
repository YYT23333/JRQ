<!--index.wxml-->
<import src='/template/searchBar/searchBar.wxml' />
<import src='/template/adBar/adBar.wxml' />

<view class="container container--color-white">
  <!--搜索框-->
  <template is='searchBar' data='{{placeholder: "搜索文章", searchCondition: searchCondition}}'></template>
  <!--Banner-->
  <view class='head'>
    <view class='module column' bindtap='showAll'>
      <view class='h-center'>
        <image src='img/all.png'></image>
      </view>
      <view class='h-center'>
        <text>全部</text>
      </view>
    </view>
    <view class='module column' bindtap='showCourses'>
      <view class='h-center'>
        <image src='img/course.png'></image>
      </view>
      <view class='h-center'>
        <text>课程</text>
      </view>
    </view>
    <view class='module column' bindtap='showDocuments'>
      <view class='h-center'>
        <image src='img/document.png'></image>
      </view>
      <view class='h-center'>
        <text>文档</text>
      </view>
    </view>
    <view class='module column' bindtap='showProjects'>
      <view class='h-center'>
        <image src='img/project.png'></image>
      </view>
      <view class='h-center'>
        <text>项目</text>
      </view>
    </view>
  </view>
  <!--广告位-->
  <template class='ad' is='adBar' data='{{ad}}'></template>
  <view class='div-line'></view>
  <view class="b1" hidden="{{flag}}">
    <view class="b2">
      <image src="{{jumpAd}}" bindtap="touchMask"></image>
    </view>
    <view class="t_w">
      <cover-view class="t_image" bindtap="closeMask">
        <cover-image src="img/close.png"></cover-image>
      </cover-view>
    </view>
  </view>
  <!--文章列表-->
  <view style='width: 100%; padding: 0 10px'>
    <text style='font-size:0.6rem' wx:if='{{searchCondition || searchCondition===""}}'>以下是“{{searchCondition}}”的搜索结果：</text>
    <view wx:for='{{articles}}' wx:key='id'>
      <view class='article' bindtap='onTouchThisArticle' data-kind='{{item.kind}}' data-id='{{item.id}}'>
        <view class='article-text'>
          <text>{{item.title}}</text>
        </view>
        <image mode='widthFix' wx:if='{{item.images.length > 0}}' src='{{item.images[0]}}'></image>
        <!--
        <view class='article-images'>
          <image wx:for='{{item.images}}' wx:for-item='image' src='{{image}}'></image>
        </view>
        -->
        <view class='article-info row'>
          <view class='writer-info v-center'>
            <image src='{{item.writerFace ? item.writerFace : "/default/default-face.png"}}'></image>
            <text>{{item.writerName}}</text>
            <view class='dot'></view>
            <text>{{item.date}}</text>
          </view>
          <view class='like-info v-center' catchtap='likePlus' data-kind='{{item.kind}}' data-id='{{item.id}}'>
            <text>{{item.likeNum}}</text>
            <image wx:if='{{item.hasLiked}}' src='img/like.png'></image>
            <image wx:else src='img/unlike.png'></image>
          </view>
        </view>
        <view class='div-line'></view>
      </view>
    </view>
  </view>
</view>